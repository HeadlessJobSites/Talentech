
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stillingsannonse</title>
    <!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="https://kit.fontawesome.com/ca38a06270.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
<script src="https://widget.gobistories.com/gwi/6" async onload="gobi.discover()"></script>


</head>

<body>


    <!-- Placeholder for Gobi collection -->
    <div class="gobi-collection"></div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Map of organization units to corresponding Gobi collection IDs
        var orgUnitToGobiId = {
            "Finance": "tavnb",
            "Tech": "mnnvj"
        };

        // Find the organization unit span
        var orgUnitSpan = document.querySelector('.organization-unit');
        var orgUnitText = orgUnitSpan.textContent.trim();

        // Find the Gobi collection div
        var gobiCollectionDiv = document.querySelector('.gobi-collection');

        // Set the data-gobi-collection-id based on the organization unit
        if (orgUnitToGobiId[orgUnitText]) {
            gobiCollectionDiv.setAttribute('data-gobi-collection-id', orgUnitToGobiId[orgUnitText]);
        }
    });
    </script>

	


	
	
	
	
	
<script>
$(document).ready(function() {
    const params = new URLSearchParams(window.location.search);
    const jobId = parseInt(params.get('jobId'), 10);

    fetch('https://api.talentech.io/reachmee/feed/')
        .then(response => response.json())
        .then(jobs => {
            const job = jobs.find(job => job.ad_id === jobId);
            if (job) {
                const organizationUnit = job.organizations && job.organizations.length > 1 ? job.organizations[1].nameorgunit : job.organizations[0]?.nameorgunit || 'Not specified';
                const city = job.areas && job.areas.length > 0 ? job.areas[0].name : 'Not specified';
		    
                const applicationLink = job.link.replace("rmpage=job", "rmpage=apply");
                $('#applyButton').attr('onclick', `window.location.href='${applicationLink}'`);
                $('#applyButton-tt').attr('onclick', `window.location.href='${applicationLink}'`);

                // Split the job title into words and apply different styles
                const titleWords = job.title.split(' ');
                const firstWord = titleWords.shift(); 
                const restOfTitle = titleWords.join(' '); 
                $('.job-title').html(`<span style="font-weight:400;">${firstWord}</span> <span style="font-weight:800;">${restOfTitle}</span>`); 

                $('.job-title2').html(job.title);
                $('.job-description').html(job.description);
                $('.organization-unit').text(organizationUnit);
                $('.city').text(city);
                $('.country').text(job.country);
                $('.publishing-date').text(job.publishing_date);
                $('.expiration-date').text(job.expiration_date);

                $('.contact-persons').empty();
                job.contact_persons.forEach((person) => {
                    const contactInfo = `
                        <div class="contact-person">
                            <p>${person.first_name} ${person.surname}, ${person.position}<br>
                            <a href="mailto:${person.email}">${person.email}</a><br>
                            <a href="tel:${person.phone}">${person.phone}</a></p>
                        </div>`;
                    $('.contact-persons').append(contactInfo);
                });
            } else {
                $('.job-details').text('Job not found.');
            }
        })
        .catch(error => {
            console.error('Error fetching job details:', error);
            $('.job-details').text('Job details could not be loaded.');
        });
});

</script>

	
	
</body>

</html>
